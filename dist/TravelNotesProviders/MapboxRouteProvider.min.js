/**
 * 
 * @source: https://github.com/wwwouaiebe/leaflet.TravelNotes
 * 
 * @licstart  The following is the entire license notice for the
 * JavaScript code in this page.
 * 
 * leaflet.travelnotes - version 2.1.0
 * Build 00096 - 2021-01-15T15:51:51+0100 
 * Copyright 2017 2021 wwwouaiebe 
 * Contact: https://www.ouaie.be/
 * License: GPL-3.0
 * 
 * The JavaScript code in this page is free software: you can
 * redistribute it and/or modify it under the terms of the GNU
 * General Public License (GNU GPL) as published by the Free Software
 * Foundation, either version 3 of the License, or (at your option)
 * any later version.  The code is distributed WITHOUT ANY WARRANTY;
 * without even the implied warranty of MERCHANTABILITY or FITNESS
 * FOR A PARTICULAR PURPOSE.  See the GNU GPL for more details.
 * 
 * As additional permission under GNU GPL version 3 section 7, you
 * may distribute non-source (e.g., minimized or compacted) forms of
 * that code without the copy of the GNU GPL normally required by
 * section 4, provided you include this license notice and a URL
 * through which recipients can access the Corresponding Source.
 * 
 * @licend  The above is the entire license notice
 * for the JavaScript code in this page.
 * 
 */


!function(){"use strict";let e={};function t(e){return Math.floor(Math.abs(e)+.5)*(0<=e?1:-1)}function r(e,r,n){let i=(e=t(e*n))-(r=t(r*n));i<<=1,0>e-r&&(i=~i);let a="";for(;32<=i;)a+=String.fromCharCode(63+(32|31&i)),i>>=5;return a+=String.fromCharCode(i+63),a}function n(e){let t=[];for(let r=0;r<e.length;r++){let n=e[r].slice();t.push([n[1],n[0]])}return t}e.decode=function(e,t){let r,n,i=0,a=0,o=0,s=[],l=0,f=0,d=null,u=Math.pow(10,Number.isInteger(t)?t:5);for(;i<e.length;){d=null,l=0,f=0;do{d=e.charCodeAt(i++)-63,f|=(31&d)<<l,l+=5}while(32<=d);r=1&f?~(f>>1):f>>1,l=f=0;do{d=e.charCodeAt(i++)-63,f|=(31&d)<<l,l+=5}while(32<=d);n=1&f?~(f>>1):f>>1,a+=r,o+=n,s.push([a/u,o/u])}return s},e.encode=function(e,t){if(!e.length)return"";let n=Math.pow(10,Number.isInteger(t)?t:5),i=r(e[0][0],0,n)+r(e[0][1],0,n);for(let t=1;t<e.length;t++){let a=e[t],o=e[t-1];i+=r(a[0],o[0],n),i+=r(a[1],o[1],n)}return i},e.fromGeoJSON=function(t,r){if(t&&"Feature"===t.type&&(t=t.geometry),!t||"LineString"!==t.type)throw new Error("Input must be a GeoJSON LineString");return e.encode(n(t.coordinates),r)},e.toGeoJSON=function(t,r){return{type:"LineString",coordinates:n(e.decode(t,r))}},"object"==typeof module&&module.exports&&(module.exports=e);let i={supportedCodes:["en","fr"],instructions:{},grammars:{},abbreviations:{}};async function a(e,t){await fetch("TravelNotesProviders/languages/"+e+"/"+t+".json").then(r=>{200===r.status&&r.ok&&async function(e,t,r){await r.json().then(r=>{i[e][t]=r})}(e,t,r)})}i.supportedCodes.forEach(e=>{a("instructions",e),a("grammars",e),a("abbreviations",e)});let o=i.instructions,s=i.grammars,l={capitalizeFirstLetter:function(e,t){return t.charAt(0).toLocaleUpperCase(e)+t.slice(1)},ordinalize:function(e,t){if(!e)throw new Error("No language code provided");return o[e].v5.constants.ordinalize[t.toString()]||""},directionFromDegree:function(e,t){if(!e)throw new Error("No language code provided");if(t||0===t){if(0>t&&360<t)throw new Error("Degree "+t+" invalid");return 20>=t?o[e].v5.constants.direction.north:70>t?o[e].v5.constants.direction.northeast:110>=t?o[e].v5.constants.direction.east:160>t?o[e].v5.constants.direction.southeast:200>=t?o[e].v5.constants.direction.south:250>t?o[e].v5.constants.direction.southwest:290>=t?o[e].v5.constants.direction.west:340>t?o[e].v5.constants.direction.northwest:o[e].v5.constants.direction.north}return""},laneConfig:function(e){if(!e.intersections||!e.intersections[0].lanes)throw new Error("No lanes object");let t=[],r=null;return e.intersections[0].lanes.forEach((function(e){null!==r&&r===e.valid||(e.valid?t.push("o"):t.push("x"),r=e.valid)})),t.join("")},getWayName:function(e,t,r){let n=r&&r.classes||[];if("object"!=typeof t)throw new Error("step must be an Object");if(!e)throw new Error("No language code provided");if(!Array.isArray(n))throw new Error("classes must be an Array or undefined");let i="",a=t.name||"",s=(t.ref||"").split(";")[0];a===t.ref&&(a=""),a=a.replace(" ("+t.ref+")","");let l=-1!==n.indexOf("motorway");if(a&&s&&a!==s&&!l){let t=o[e].v5.phrase["name and ref"]||o.en.v5.phrase["name and ref"];i=this.tokenize(e,t,{name:a,ref:s},r)}else i=a&&s&&l&&/\d/.test(s)||!a&&s?r&&r.formatToken?r.formatToken("ref",s):s:r&&r.formatToken?r.formatToken("name",a):a;return i},compile:function(e,t,r){if(!e)throw new Error("No language code provided");if(-1===i.supportedCodes.indexOf(e))throw new Error("language code "+e+" not loaded");if(!t.maneuver)throw new Error("No step maneuver provided");let n=r||{},a=t.maneuver.type,s=t.maneuver.modifier,l=t.mode,f=t.driving_side;if(!a)throw new Error("Missing step maneuver type");if("depart"!==a&&"arrive"!==a&&!s)throw new Error("Missing step maneuver modifier");o[e].v5[a]||(console.log("Encountered unknown instruction type: "+a),a="turn");let d=null;if(o[e].v5.modes[l])d=o[e].v5.modes[l];else{let t="off ramp"===a&&0<=s.indexOf(f);d=o[e].v5[a][s]&&!t?o[e].v5[a][s]:o[e].v5[a].default}let u=null;switch(a){case"use lane":u=o[e].v5.constants.lanes[this.laneConfig(t)],u||(d=o[e].v5["use lane"].no_lanes);break;case"rotary":case"roundabout":d=t.rotary_name&&t.maneuver.exit&&d.name_exit?d.name_exit:t.rotary_name&&d.name?d.name:t.maneuver.exit&&d.exit?d.exit:d.default}let h=this.getWayName(e,t,n),g=d.default;t.destinations&&t.exits&&d.exit_destination?g=d.exit_destination:t.destinations&&d.destination?g=d.destination:t.exits&&d.exit?g=d.exit:h&&d.name?g=d.name:n.waypointName&&d.named&&(g=d.named);let c=t.destinations&&t.destinations.split(": "),p=c&&c[0].split(",")[0],m=c&&c[1]&&c[1].split(",")[0],k="";k=m&&p?p+": "+m:p||m||"";let v=0<=n.legIndex&&n.legIndex!==n.legCount-1?this.ordinalize(e,n.legIndex+1):"",R={way_name:h,destination:k,exit:(t.exits||"").split(";")[0],exit_number:this.ordinalize(e,t.maneuver.exit||1),rotary_name:t.rotary_name,lane_instruction:u,modifier:o[e].v5.constants.modifier[s],direction:this.directionFromDegree(e,t.maneuver.bearing_after),nth:v,waypoint_name:n.waypointName};return this.tokenize(e,g,R,n)},grammarize:function(e,t,r){if(!e)throw new Error("No language code provided");if(r&&s&&s[e]&&s[e].v5){let n=s[e].v5[r];if(n){let r=" "+t+" ",i=s[e].meta.regExpFlags||"";return n.forEach((function(e){let t=new RegExp(e[0],i);r=r.replace(t,e[1])})),r.trim()}}return t},abbreviations:i.abbreviations,tokenize:function(e,t,r,n){if(!e)throw new Error("No language code provided");let i=this,a=!1,s=t.replace(/\{(\w+)(?::(\w+))?\}/g,(function(t,s,l,f){let d=r[s];return void 0===d?t:(d=i.grammarize(e,d,l),0===f&&o[e].meta.capitalizeFirstLetter&&(a=!0,d=i.capitalizeFirstLetter(e,d)),n&&n.formatToken&&(d=n.formatToken(s,d)),d)})).replace(/ {2}/g," ");return!a&&o[e].meta.capitalizeFirstLetter?this.capitalizeFirstLetter(e,s):s}},f={turn:{default:"kUndefined","sharp left":"kTurnSharpLeft",left:"kTurnLeft","slight left":"kTurnSlightLeft",straight:"kTurnStraight","slight right":"kTurnSlightRight",right:"kTurnRight","sharp right":"kTurnSharpRight",uturn:"kTurnUturn"},"new name":{default:"kUndefined","sharp left":"kNewNameSharpLeft",left:"kNewNameLeft","slight left":"kNewNameSlightLeft",straight:"kNewNameStraight","slight right":"kNewNameSlightRight",right:"kNewNameRight","sharp right":"kNewNameSharpRight"},depart:{default:"kDepartDefault","sharp left":"kDepartLeft",left:"kDepartLeft","slight left":"kDepartLeft",straight:"kDepartDefault","slight right":"kDepartRight",right:"kDepartRight","sharp right":"kDepartRight"},arrive:{default:"kArriveDefault","sharp left":"kArriveLeft",left:"kArriveLeft","slight left":"kArriveLeft",straight:"kArriveDefault","slight right":"kArriveRight",right:"kArriveRight","sharp right":"kArriveRight"},merge:{default:"kMergeDefault","sharp left":"kMergeLeft",left:"kMergeLeft","slight left":"kMergeLeft",straight:"kMergeDefault","slight right":"kMergeRight",right:"kMergeRight","sharp right":"kMergeRight"},"on ramp":{default:"kUndefined","sharp left":"kOnRampLeft",left:"kOnRampLeft","slight left":"kOnRampLeft","slight right":"kOnRampRight",right:"kOnRampRight","sharp right":"kOnRampRight"},"off ramp":{default:"kUndefined","sharp left":"kOffRampLeft",left:"kOffRampLeft","slight left":"kOffRampLeft","slight right":"kOffRampRight",right:"kOffRampRight","sharp right":"kOffRampRight"},fork:{default:"kUndefined","sharp left":"kForkLeft",left:"kForkLeft","slight left":"kForkLeft","slight right":"kForkRight",right:"kForkRight","sharp right":"kForkRight"},"end of road":{default:"kUndefined","sharp left":"kEndOfRoadLeft",left:"kEndOfRoadLeft","slight left":"kEndOfRoadLeft","slight right":"kEndOfRoadRight",right:"kEndOfRoadRight","sharp right":"kEndOfRoadRight"},continue:{default:"kUndefined","sharp left":"kContinueSharpLeft",left:"kContinueLeft","slight left":"kContinueSlightLeft",straight:"kContinueStraight","slight right":"kContinueSlightRight",right:"kContinueRight","sharp right":"kContinueSharpRight"},roundabout:{default:"kUndefined","sharp left":"kRoundaboutLeft",left:"kRoundaboutLeft","slight left":"kRoundaboutLeft","slight right":"kRoundaboutRight",right:"kRoundaboutRight","sharp right":"kRoundaboutRight"},rotary:{default:"kUndefined","sharp left":"kRotaryLeft",left:"kRotaryLeft","slight left":"kRotaryLeft","slight right":"kRotaryRight",right:"kRotaryRight","sharp right":"kRotaryRight"},"roundabout turn":{default:"kUndefined","sharp left":"kRoundaboutTurnSharpLeft",left:"kRoundaboutTurnLeft","slight left":"kRoundaboutTurnSlightLeft",straight:"kRoundaboutTurnStraight","slight right":"kRoundaboutTurnSlightRight",right:"kRoundaboutTurnRight","sharp right":"kRoundaboutTurnSharpRight"},notification:{default:"kUndefined"},default:{default:"kUndefined"}};
/**
	@------------------------------------------------------------------------------------------------------------------------------

	@file Constants.js
	@copyright Copyright - 2017 2021 - wwwouaiebe - Contact: https://www.ouaie.be/
	@license GNU General Public License
	@private

	@------------------------------------------------------------------------------------------------------------------------------
	*/
Object.freeze({fixed:2,invalid:-1,defaultValue:0}),Object.freeze({refusedByUser:-1,disabled:0,inactive:1,active:2}),Object.freeze({invalidPane:"43a6a53e-008a-4910-80a6-7a87d301ea15",itineraryPane:"8fbf0da7-4e6f-4bc7-8e20-1388461ccde7",travelNotesPane:"dffe782b-07df-4b81-a318-f287c0cf5ec6",searchPane:"228f00d7-43a8-4c13-897d-70400cb6dd58"}),Object.freeze({fixed:2,defaultValue:0}),Object.freeze({defaultValue:0,fixed:6}),Object.freeze({notEdited:0,editedNoChange:1,editedChanged:2}),Object.freeze({margin:100,height:500,width:1e3,yDeltaText:30,xDeltaText:10,vScales:[1,2,5,10,20,50,100,200,500,1e3,2e3,5e3],hScales:[1,2,5,10,20,50,100,200,500,1e3,2e3,5e3,1e4,2e4,5e4,1e5]}),Object.freeze({width:40,height:40,svgViewboxDim:200});window.L.travelNotes.addProvider(function(){let t="",r="fr",n=null;function i(i,a){var o,s;(o=function(){let e=null;n.wayPoints.forEach(t=>{e=e?e+";":"",e+=t.lng.toFixed(6)+","+t.lat.toFixed(6)});let r="";switch(n.itinerary.transitMode){case"car":r="mapbox/driving/";break;case"bike":r="mapbox/cycling/";break;case"pedestrian":r="mapbox/walking/";break;default:return void console.log("invalid transitMode")}return"https://api.mapbox.com/directions/v5/"+r+e+"?geometries=polyline6&overview=full&steps=true&annotations=distance&access_token="+t}(),new Promise((function(e,t){let r=new XMLHttpRequest;r.timeout=15e3,r.onreadystatechange=function(){if(4===r.readyState)if(200===r.status){let n=null;try{n=JSON.parse(r.responseText),e(n)}catch(e){t(new Error("JSON parsing error. File : "+r.responseURL))}}else 400<=r.status?t(new Error("Error HTTP "+r.status+" "+r.statusText)):t(new Error("Error XMLHttpRequest - File : "+r.responseURL))},r.open("GET",o,!0),s&&s.forEach(e=>r.setRequestHeader(e.headerName,e.headerValue)),r.overrideMimeType("application/json"),r.send(null)}))).then(t=>function(t,i,a){"Ok"!==t.code&&a(new Error("Response code not ok")),0===t.routes.length&&a(new Error("Route not found")),n.itinerary.itineraryPoints.removeAll(),n.itinerary.maneuvers.removeAll(),n.itinerary.hasProfile=!1,n.itinerary.ascent=0,n.itinerary.descent=0,t.routes[0].geometry=e.decode(t.routes[0].geometry,6),t.routes[0].legs.forEach((function(t){let i=0;t.steps.forEach((function(a){a.geometry=e.decode(a.geometry,6),"arrive"===a.maneuver.type&&2===a.geometry.length&&a.geometry[0][0]===a.geometry[1][0]&&a.geometry[0][1]===a.geometry[1][1]&&a.geometry.pop();let o=window.L.travelNotes.maneuver;o.iconName=f[a.maneuver.type]?f[a.maneuver.type][a.maneuver.modifier]||f[a.maneuver.type].default:f.default.default,o.instruction=l.compile(r,a),o.duration=a.duration;let s=0;for(let e=0;1===a.geometry.length?1>e:e<a.geometry.length;e++){let r=window.L.travelNotes.itineraryPoint;r.latLng=[a.geometry[e][0],a.geometry[e][1]],r.distance=t.annotation.distance[i]?t.annotation.distance[i]:0,n.itinerary.itineraryPoints.add(r),e!==a.geometry.length-1&&(s+=r.distance,i++),0===e&&(o.itineraryPointObjId=r.objId)}o.distance=s,n.itinerary.maneuvers.add(o)}))}));let o=n.wayPoints.iterator;t.waypoints.forEach((function(e){o.done||(o.value.latLng=[e.location[1],e.location[0]])})),i(n)}(t,i,a)).catch(e=>a(e))}return{getPromiseRoute:e=>function(e){return n=e,new Promise(i)}(e),get icon(){return"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWX\t\t\t\t\tMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4AocEwcBrMn63AAAAk1JREFUSMftlj9oU1EUxn8neQ0thE6lgpO1TiptHhShJiIu2qHJA6\t\t\t\t\tFudtBRUBcpouJUnRyqgpODVcG62LROHfzHexGiJWkEQbCr0IqVYKPStDkOpuYRfW1eTNCh33Tvufec717udz8ObOFfITqV3XA9Nj\t\t\t\t\tn3W+xAMuO7pnhs7AQiwCqwpvBNVN47Vu8SQDSZwbFMqsexyUyHinQjtAEBwACyTiKyWM1heBzyMHDXdbplRCeiyexVCei8HTfpf5\t\t\t\t\tgCwLFM9k/lEF3bpSIXgWNAm6vWceBercQrVfMwcBKhvVRcOwEst2zbXlldXQljGFeAoRpqbUjshSExgo9iM6kHLw7uUIDYTEr0ez\t\t\t\t\tDuQeoJw7/8ZLRUCD/ZNz6/AFAqFDolWBr1WyVQh/C7JKgj6eFu0sPdSFBHgC6/RWq7sbCI0g60/gzoqWhy7v762LXzC/AR2NmQG6\t\t\t\t\ttyE3jnCoUQHUN0DAi54m+BGw27sUAGyAOjZYUD9Fdty4vqLRX51Mg3bnUSkevAm6rc9XwFXtuWeafyHI0hDgCI6AXg8x/WlwTO+6\t\t\t\t\tnpS9V23HwKJMtW+ss+FCbsRORVU79TMdByFlhwhT60hELnmvqP+6dzpAf35BG9DBSBoqheej6w+2vsca55xC/jPei04sTN20AKsG\t\t\t\t\t3LHN87cg17sKe5ztXHbFnHclrgDEDHwFGa41wuzMb7iCbncKzeHEBsKsuzQ74dsy6vxrF6K0pPROrqdOoibgT+O+LQJvONUFOul7\t\t\t\t\thmgCNlhzKArA/i+nK92tvN2t6/zd1C0/ADiOy3l0UZHxAAAAAASUVORK5CYII="},get name(){return"Mapbox"},get transitModes(){return{car:!0,bike:!0,pedestrian:!0,train:!1}},get providerKeyNeeded(){return!0},get providerKey(){return t.length},set providerKey(e){t=e},get userLanguage(){return r},set userLanguage(e){r=e}}}())}();