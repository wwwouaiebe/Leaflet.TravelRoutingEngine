/**
 * 
 * @source: https://github.com/wwwouaiebe/leaflet.TravelNotes
 * 
 * @licstart  The following is the entire license notice for the
 * JavaScript code in this page.
 * 
 * leaflet.travelnotes - version 2.3.0
 * Build 00132 - 2021-07-08T13:20:40+0200 
 * Copyright 2017 2021 wwwouaiebe 
 * Contact: https://www.ouaie.be/
 * License: GPL-3.0
 * 
 * The JavaScript code in this page is free software: you can
 * redistribute it and/or modify it under the terms of the GNU
 * General Public License (GNU GPL) as published by the Free Software
 * Foundation, either version 3 of the License, or (at your option)
 * any later version.  The code is distributed WITHOUT ANY WARRANTY;
 * without even the implied warranty of MERCHANTABILITY or FITNESS
 * FOR A PARTICULAR PURPOSE.  See the GNU GPL for more details.
 * 
 * As additional permission under GNU GPL version 3 section 7, you
 * may distribute non-source (e.g., minimized or compacted) forms of
 * that code without the copy of the GNU GPL normally required by
 * section 4, provided you include this license notice and a URL
 * through which recipients can access the Corresponding Source.
 * 
 * @licend  The above is the entire license notice
 * for the JavaScript code in this page.
 * 
 */


!function(){"use strict";
/**
	@------------------------------------------------------------------------------------------------------------------------------

	@file Constants.js
	@copyright Copyright - 2017 2021 - wwwouaiebe - Contact: https://www.ouaie.be/
	@license GNU General Public License
	@private

	@------------------------------------------------------------------------------------------------------------------------------
	*/Object.freeze({notSaved:"ðŸ”´",modified:"ðŸŸ¡",saved:"ðŸŸ¢"}),Object.freeze({fixed:2,invalid:-1,defaultValue:0,metersInKm:1e3}),Object.freeze({refusedByUser:-1,disabled:0,inactive:1,active:2}),Object.freeze({invalidPane:"43a6a53e-008a-4910-80a6-7a87d301ea15",itineraryPane:"8fbf0da7-4e6f-4bc7-8e20-1388461ccde7",travelNotesPane:"dffe782b-07df-4b81-a318-f287c0cf5ec6",searchPane:"228f00d7-43a8-4c13-897d-70400cb6dd58"}),Object.freeze({fixed:2,defaultValue:0});const e=Object.freeze({defaultValue:0,fixed:6,maxLat:90,minLat:-90,maxLng:180,minLng:-180});Object.freeze({notEdited:0,editedNoChange:1,editedChanged:2}),Object.freeze({margin:100,height:500,width:1e3,yDeltaText:30,xDeltaText:10,vScales:[1,2,5,10,20,50,100,200,500,1e3,2e3,5e3],hScales:[1,2,5,10,20,50,100,200,500,1e3,2e3,5e3,1e4,2e4,5e4,1e5]}),Object.freeze({width:40,height:40,svgViewboxDim:200}),Object.freeze({d0:0,d90:90,d180:180,d270:270,d360:360,d540:540,toRadians:Math.PI/180,fromRadians:180/Math.PI});function t(e){return Math.floor(Math.abs(e)+.5)*(0<=e?1:-1)}const r=new class{constructor(){Object.freeze(this)}encode(e,r){if(!e.length)return"";let i=r.length,n=Array.from(r,e=>Math.pow(10,e));function a(e,r,i){let n=t(e*i),a=t(r*i),o=n-a;o<<=1,0>n-a&&(o=~o);let s="";for(;32<=o;)s+=String.fromCharCode(63+(32|31&o)),o>>=5;return s+=String.fromCharCode(o+63),s}let o="";for(let t=0;t<i;t++)o+=a(e[0][t],0,n[t]);for(let t=1;t<e.length;t++){let r=e[t],s=e[t-1];for(let e=0;e<i;e++)o+=a(r[e],s[e],n[e])}return o}decode(e,t){let r=t.length;if(!e||0===e.length)return[];let i=0,n=[],a=Array.from(t,e=>Math.pow(10,e)),o=new Array(r).fill(0);function s(){let t=null,r=0,n=0;do{t=e.charCodeAt(i++)-63,n|=(31&t)<<r,r+=5}while(32<=t);return 1&n?~(n>>1):n>>1}for(;i<e.length;){let e=new Array(r).fill(0);for(let t=0;t<r;t++)o[t]+=s(),e[t]=o[t]/a[t];n.push(e)}return n}},i=["ar","da","de","en","eo","es","es-ES","fi","fr","he","hu","id","it","ja","ko","my","nl","no","pl","pt-BR","pt-PT","ro","ru","sl","sv","tr","uk","vi","yo","zh-Hans"];let n={supportedCodes:[],instructions:{},grammars:{},abbreviations:{}},a=n.instructions,o=n.grammars,s=n.abbreviations;const f=new class{constructor(){this.abbreviations=s,Object.freeze(this)}loadLanguage(e){let t=-1===i.indexOf(e)?"en":e;return["instructions","grammars","abbreviations"].forEach(e=>async function(e,t){let r=await fetch("TravelNotesProviders/languages/"+e+"/"+t+".json");if(200===r.status&&r.ok){let i=await r.json();n[e][t]=i}}(e,t)),t}capitalizeFirstLetter(e,t){return t.charAt(0).toLocaleUpperCase(e)+t.slice(1)}ordinalize(e,t){return a[e].v5.constants.ordinalize[t.toString()]||""}directionFromDegree(e,t){return function(e,t){if(t||0===t){if(0>t&&360<t)throw new Error("Degree "+t+" invalid");return 20>=t?a[e].v5.constants.direction.north:70>t?a[e].v5.constants.direction.northeast:110>=t?a[e].v5.constants.direction.east:160>t?a[e].v5.constants.direction.southeast:200>=t?a[e].v5.constants.direction.south:250>t?a[e].v5.constants.direction.southwest:290>=t?a[e].v5.constants.direction.west:340>t?a[e].v5.constants.direction.northwest:a[e].v5.constants.direction.north}return""}(e,t)}laneConfig(e){if(!e.intersections||!e.intersections[0].lanes)throw new Error("No lanes object");let t=[],r=null;return e.intersections[0].lanes.forEach((function(e){null!==r&&r===e.valid||(e.valid?t.push("o"):t.push("x"),r=e.valid)})),t.join("")}getWayName(e,t,r){let i=r&&r.classes||[];if("object"!=typeof t)throw new Error("step must be an Object");if(!Array.isArray(i))throw new Error("classes must be an Array or undefined");let n="",o=t.name||"",s=(t.ref||"").split(";")[0];o===t.ref&&(o=""),o=o.replace(" ("+t.ref+")","");let f=-1!==i.indexOf("motorway");if(o&&s&&o!==s&&!f){let t=a[e].v5.phrase["name and ref"]||a.en.v5.phrase["name and ref"];n=this.tokenize(e,t,{name:o,ref:s},r)}else n=o&&s&&f&&/\d/.test(s)||!o&&s?r&&r.formatToken?r.formatToken("ref",s):s:r&&r.formatToken?r.formatToken("name",o):o;return n}compile(e,t,r){if(!t.maneuver)throw new Error("No step maneuver provided");let i=r||{},n=t.maneuver.type,o=t.maneuver.modifier,s=t.mode,f=t.driving_side;if(!n)throw new Error("Missing step maneuver type");if("depart"!==n&&"arrive"!==n&&!o)throw new Error("Missing step maneuver modifier");a[e].v5[n]||(console.log("Encountered unknown instruction type: "+n),n="turn");let l=null;if(a[e].v5.modes[s])l=a[e].v5.modes[s];else{let t="off ramp"===n&&0<=o.indexOf(f);l=a[e].v5[n][o]&&!t?a[e].v5[n][o]:a[e].v5[n].default}let h=null;switch(n){case"use lane":h=a[e].v5.constants.lanes[this.laneConfig(t)],h||(l=a[e].v5["use lane"].no_lanes);break;case"rotary":case"roundabout":l=t.rotary_name&&t.maneuver.exit&&l.name_exit?l.name_exit:t.rotary_name&&l.name?l.name:t.maneuver.exit&&l.exit?l.exit:l.default}let d=this.getWayName(e,t,i),g=l.default;t.destinations&&t.exits&&l.exit_destination?g=l.exit_destination:t.destinations&&l.destination?g=l.destination:t.exits&&l.exit?g=l.exit:d&&l.name?g=l.name:i.waypointName&&l.named&&(g=l.named);let u=t.destinations&&t.destinations.split(": "),c=u&&u[0].split(",")[0],m=u&&u[1]&&u[1].split(",")[0],p="";p=m&&c?c+": "+m:c||m||"";let k=0<=i.legIndex&&i.legIndex!==i.legCount-1?this.ordinalize(e,i.legIndex+1):"",v={way_name:d,destination:p,exit:(t.exits||"").split(";")[0],exit_number:this.ordinalize(e,t.maneuver.exit||1),rotary_name:t.rotary_name,lane_instruction:h,modifier:a[e].v5.constants.modifier[o],direction:this.directionFromDegree(e,t.maneuver.bearing_after),nth:k,waypoint_name:i.waypointName};return this.tokenize(e,g,v,i)}grammarize(e,t,r){if(r&&o&&o[e]&&o[e].v5){let i=o[e].v5[r];if(i){let r=" "+t+" ",n=o[e].meta.regExpFlags||"";return i.forEach((function(e){let t=new RegExp(e[0],n);r=r.replace(t,e[1])})),r.trim()}}return t}tokenize(e,t,r,i){let n=this,o=!1,s=t.replace(/\{(\w+)(?::(\w+))?\}/g,(function(t,s,f,l){let h=r[s];return void 0===h?t:(h=n.grammarize(e,h,f),0===l&&a[e].meta.capitalizeFirstLetter&&(o=!0,h=n.capitalizeFirstLetter(e,h)),i&&i.formatToken&&(h=i.formatToken(s,h)),h)})).replace(/ {2}/g," ");return!o&&a[e].meta.capitalizeFirstLetter?this.capitalizeFirstLetter(e,s):s}},l=Object.freeze({turn:Object.freeze({default:"kUndefined","sharp left":"kTurnSharpLeft",left:"kTurnLeft","slight left":"kTurnSlightLeft",straight:"kTurnStraight","slight right":"kTurnSlightRight",right:"kTurnRight","sharp right":"kTurnSharpRight",uturn:"kTurnUturn"}),"new name":Object.freeze({default:"kUndefined","sharp left":"kNewNameSharpLeft",left:"kNewNameLeft","slight left":"kNewNameSlightLeft",straight:"kNewNameStraight","slight right":"kNewNameSlightRight",right:"kNewNameRight","sharp right":"kNewNameSharpRight"}),depart:Object.freeze({default:"kDepartDefault","sharp left":"kDepartLeft",left:"kDepartLeft","slight left":"kDepartLeft",straight:"kDepartDefault","slight right":"kDepartRight",right:"kDepartRight","sharp right":"kDepartRight"}),arrive:Object.freeze({default:"kArriveDefault","sharp left":"kArriveLeft",left:"kArriveLeft","slight left":"kArriveLeft",straight:"kArriveDefault","slight right":"kArriveRight",right:"kArriveRight","sharp right":"kArriveRight"}),merge:Object.freeze({default:"kMergeDefault","sharp left":"kMergeLeft",left:"kMergeLeft","slight left":"kMergeLeft",straight:"kMergeDefault","slight right":"kMergeRight",right:"kMergeRight","sharp right":"kMergeRight"}),"on ramp":Object.freeze({default:"kUndefined","sharp left":"kOnRampLeft",left:"kOnRampLeft","slight left":"kOnRampLeft","slight right":"kOnRampRight",right:"kOnRampRight","sharp right":"kOnRampRight"}),"off ramp":Object.freeze({default:"kUndefined","sharp left":"kOffRampLeft",left:"kOffRampLeft","slight left":"kOffRampLeft","slight right":"kOffRampRight",right:"kOffRampRight","sharp right":"kOffRampRight"}),fork:Object.freeze({default:"kUndefined","sharp left":"kForkLeft",left:"kForkLeft","slight left":"kForkLeft","slight right":"kForkRight",right:"kForkRight","sharp right":"kForkRight"}),"end of road":Object.freeze({default:"kUndefined","sharp left":"kEndOfRoadLeft",left:"kEndOfRoadLeft","slight left":"kEndOfRoadLeft","slight right":"kEndOfRoadRight",right:"kEndOfRoadRight","sharp right":"kEndOfRoadRight"}),continue:Object.freeze({default:"kUndefined","sharp left":"kContinueSharpLeft",left:"kContinueLeft","slight left":"kContinueSlightLeft",straight:"kContinueStraight","slight right":"kContinueSlightRight",right:"kContinueRight","sharp right":"kContinueSharpRight"}),roundabout:Object.freeze({default:"kUndefined","sharp left":"kRoundaboutLeft",left:"kRoundaboutLeft","slight left":"kRoundaboutLeft","slight right":"kRoundaboutRight",right:"kRoundaboutRight","sharp right":"kRoundaboutRight"}),rotary:Object.freeze({default:"kUndefined","sharp left":"kRotaryLeft",left:"kRotaryLeft","slight left":"kRotaryLeft","slight right":"kRotaryRight",right:"kRotaryRight","sharp right":"kRotaryRight"}),"roundabout turn":Object.freeze({default:"kUndefined","sharp left":"kRoundaboutTurnSharpLeft",left:"kRoundaboutTurnLeft","slight left":"kRoundaboutTurnSlightLeft",straight:"kRoundaboutTurnStraight","slight right":"kRoundaboutTurnSlightRight",right:"kRoundaboutTurnRight","sharp right":"kRoundaboutTurnSharpRight"}),notification:Object.freeze({default:"kUndefined"}),default:Object.freeze({default:"kUndefined"})});
/**
	@------------------------------------------------------------------------------------------------------------------------------

	@file IconList.js
	@copyright Copyright - 2017 2021 - wwwouaiebe - Contact: https://www.ouaie.be/
	@license GNU General Public License
	@private

	@------------------------------------------------------------------------------------------------------------------------------
	*/let h="",d="fr",g=null;function u(t,i){fetch(function(){let t=null;g.wayPoints.forEach(r=>{t=t?t+";":"",t+=r.lng.toFixed(e.fixed)+","+r.lat.toFixed(e.fixed)});let r="";switch(g.itinerary.transitMode){case"car":r="mapbox/driving/";break;case"bike":r="mapbox/cycling/";break;case"pedestrian":r="mapbox/walking/";break;default:return}return"https://api.mapbox.com/directions/v5/"+r+t+"?geometries=polyline6&overview=full&steps=true&annotations=distance&access_token="+h}()).then(e=>{200===e.status&&e.ok?e.json().then(e=>function(e,t,i){if("Ok"!==e.code)return void i(new Error("Response code not ok"));if(0===e.routes.length)return void i(new Error("Route not found"));g.itinerary.itineraryPoints.removeAll(),g.itinerary.maneuvers.removeAll(),g.itinerary.hasProfile=!1,g.itinerary.ascent=0,g.itinerary.descent=0,e.routes[0].geometry=r.decode(e.routes[0].geometry,[6,6]),e.routes[0].legs.forEach((function(e){let t=0;e.steps.forEach((function(i){i.geometry=r.decode(i.geometry,[6,6]),"arrive"===i.maneuver.type&&2===i.geometry.length&&i.geometry[0][0]===i.geometry[1][0]&&i.geometry[0][1]===i.geometry[1][1]&&i.geometry.pop();let n=window.TaN.maneuver;n.iconName=l[i.maneuver.type]?l[i.maneuver.type][i.maneuver.modifier]||l[i.maneuver.type].default:l.default.default,n.instruction=f.compile(d,i),n.duration=i.duration;let a=0;for(let r=0;1===i.geometry.length?1>r:r<i.geometry.length;r++){let o=window.TaN.itineraryPoint;o.latLng=[i.geometry[r][0],i.geometry[r][1]],o.distance=e.annotation.distance[t]?e.annotation.distance[t]:0,g.itinerary.itineraryPoints.add(o),r!==i.geometry.length-1&&(a+=o.distance,t++),0===r&&(n.itineraryPointObjId=o.objId)}n.distance=a,g.itinerary.maneuvers.add(n)}))}));let n=g.wayPoints.iterator;e.waypoints.forEach((function(e){n.done||(n.value.latLng=[e.location[1],e.location[0]])})),t(g)}(e,t,i)):i(new Error("Invalid status "+e.status))})}window.TaN.addProvider(new class{constructor(){Object.freeze(this)}getPromiseRoute(e){return function(e){return g=e,new Promise(u)}(e)}get icon(){return"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWX\t\t\t\tMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4AocEwcBrMn63AAAAk1JREFUSMftlj9oU1EUxn8neQ0thE6lgpO1TiptHhShJiIu2qHJA6\t\t\t\tFudtBRUBcpouJUnRyqgpODVcG62LROHfzHexGiJWkEQbCr0IqVYKPStDkOpuYRfW1eTNCh33Tvufec717udz8ObOFfITqV3XA9Nj\t\t\t\tn3W+xAMuO7pnhs7AQiwCqwpvBNVN47Vu8SQDSZwbFMqsexyUyHinQjtAEBwACyTiKyWM1heBzyMHDXdbplRCeiyexVCei8HTfpf5\t\t\t\tgCwLFM9k/lEF3bpSIXgWNAm6vWceBercQrVfMwcBKhvVRcOwEst2zbXlldXQljGFeAoRpqbUjshSExgo9iM6kHLw7uUIDYTEr0ez\t\t\t\tDuQeoJw7/8ZLRUCD/ZNz6/AFAqFDolWBr1WyVQh/C7JKgj6eFu0sPdSFBHgC6/RWq7sbCI0g60/gzoqWhy7v762LXzC/AR2NmQG6\t\t\t\ttyE3jnCoUQHUN0DAi54m+BGw27sUAGyAOjZYUD9Fdty4vqLRX51Mg3bnUSkevAm6rc9XwFXtuWeafyHI0hDgCI6AXg8x/WlwTO+6\t\t\t\tnpS9V23HwKJMtW+ss+FCbsRORVU79TMdByFlhwhT60hELnmvqP+6dzpAf35BG9DBSBoqheej6w+2vsca55xC/jPei04sTN20AKsG\t\t\t\t3LHN87cg17sKe5ztXHbFnHclrgDEDHwFGa41wuzMb7iCbncKzeHEBsKsuzQ74dsy6vxrF6K0pPROrqdOoibgT+O+LQJvONUFOul7\t\t\t\thmgCNlhzKArA/i+nK92tvN2t6/zd1C0/ADiOy3l0UZHxAAAAAASUVORK5CYII="}get name(){return"Mapbox"}get title(){return"Mapbox"}get transitModes(){return{car:!0,bike:!0,pedestrian:!0,train:!1}}get providerKeyNeeded(){return!0}get providerKey(){return h.length}set providerKey(e){h=e}get userLanguage(){return d}set userLanguage(e){d=f.loadLanguage(e)}})}();