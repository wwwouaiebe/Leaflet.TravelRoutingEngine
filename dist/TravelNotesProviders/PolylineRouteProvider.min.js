/**
 * 
 * @source: https://github.com/wwwouaiebe/leaflet.TravelNotesPolyline
 * 
 * @licstart  The following is the entire license notice for the
 * JavaScript code in this page.
 * 
 * leaflet.travelnotespolyline - version 1.8.0
 * Build 00002 - 2020-04-11T11:51:58+0200 
 * Copyright 2017 2020 wwwouaiebe 
 * Contact: https://www.ouaie.be/
 * License: GPL-3.0
 * 
 * The JavaScript code in this page is free software: you can
 * redistribute it and/or modify it under the terms of the GNU
 * General Public License (GNU GPL) as published by the Free Software
 * Foundation, either version 3 of the License, or (at your option)
 * any later version.  The code is distributed WITHOUT ANY WARRANTY;
 * without even the implied warranty of MERCHANTABILITY or FITNESS
 * FOR A PARTICULAR PURPOSE.  See the GNU GPL for more details.
 * 
 * As additional permission under GNU GPL version 3 section 7, you
 * may distribute non-source (e.g., minimized or compacted) forms of
 * that code without the copy of the GNU GPL normally required by
 * section 4, provided you include this license notice and a URL
 * through which recipients can access the Corresponding Source.
 * 
 * @licend  The above is the entire license notice
 * for the JavaScript code in this page.
 * 
 */


!function(){"use strict";window.L.travelNotes.addProvider(function(){const t=0,n=1,e=2,r=0,i=1,a=180,o=360,l=Math.PI/a,s=a/Math.PI,u=Math.PI/e,A=.1;let d="fr",c=null;const g={en:{kStart:"Start",kContinue:"Continue",kEnd:"Stop"},fr:{kStart:"Départ",kContinue:"Continuer",kEnd:"Arrivée"}},y={kStart:"kDepartDefault",kContinue:"kContinueStraight",kEnd:"kArriveDefault"};function h(t,n,e){return Math.acos(Math.cos(n)*Math.cos(e)+Math.sin(n)*Math.sin(e)*Math.cos(t))}function v(t,n,e){return Math.acos((Math.cos(e)-Math.cos(t)*Math.cos(n))/(Math.sin(t)*Math.sin(n)))}function f(n,e){let r=window.L.travelNotes.maneuver;r.iconName=y[e],r.instruction=g[d]?g[d][e]:g.en[e],r.duration=t,r.itineraryPointObjId=n,c.itinerary.maneuvers.add(r)}function P(t){let n=window.L.travelNotes.itineraryPoint;return n.latLng=t,c.itinerary.itineraryPoints.add(n),n.objId}function w(t,e){let d=[t.lat*l,t.lng*l],g=[e.lat*l,e.lng*l],y=(e.lng-t.lng+o)%o>a?-n:n,f=h(g[i]-d[i],u-d[r],u-g[r]);if(A>f*s)return;let P=v(u-d[r],f,u-g[r]),w=[];for(let t=1;t<=64;t++){let n=f*t/64,e=h(P,u-d[r],n),a=v(u-d[r],e,n),o=window.L.travelNotes.itineraryPoint;o.latLng=[(u-e)*s,(d[i]+y*a)*s],w.push(o)}e.lng=w.pop().lng,w.forEach(t=>c.itinerary.itineraryPoints.add(t))}function M(n,a){try{switch(c.itinerary.itineraryPoints.removeAll(),c.itinerary.maneuvers.removeAll(),c.itinerary.hasProfile=!1,c.itinerary.ascent=t,c.itinerary.descent=t,c.itinerary.transitMode){case"line":!function(){let t=c.wayPoints.iterator,n=null;for(;!t.done;)t.first?(n=t.value,f(P(t.value.latLng),"kStart")):(w(n,t.value),f(P(t.value.latLng),t.last?"kEnd":"kContinue"),n=t.value);let e=-Number.MAX_VALUE,r=c.itinerary.itineraryPoints.iterator;for(;!r.done;)e=Math.max(e,r.value.lng);let i=e%o-e;for(r=c.itinerary.itineraryPoints.iterator;!r.done;)r.value.lng+=i;for(t=c.wayPoints.iterator;!t.done;)t.value.lng+=i}();break;case"circle":!function(){let t=[c.wayPoints.first.lat*l,c.wayPoints.first.lng*l],n=[c.wayPoints.last.lat*l,c.wayPoints.last.lng*l],a=h(t[i]-n[i],u-t[r],u-n[r]),o=[];for(let n=0;n<=360;n++){let l=h(Math.PI/(360*e)+Math.PI*n/360,a,u-t[r]),A=v(u-t[r],l,a),d=window.L.travelNotes.itineraryPoint;d.latLng=[(u-l)*s,(t[i]+A)*s],o.push(d),(d=window.L.travelNotes.itineraryPoint).latLng=[(u-l)*s,(t[i]-A)*s],o.unshift(d),360===n&&(f(d.objId,"kStart"),(d=window.L.travelNotes.itineraryPoint).latLng=[(u-l)*s,(t[i]-A)*s],f(d.objId,"kEnd"),o.push(d))}o.forEach(t=>c.itinerary.itineraryPoints.add(t))}()}n(c)}catch(t){a(t)}}return{getPromiseRoute:t=>(t=t,c=t,new Promise(M)),get icon(){return"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAIAAAC0Ujn1AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3\t\t\t\t\t\tRJTUUH4ggaBh8z7ov/KQAAAB1pVFh0Q29tbWVudAAAAAAAQ3JlYXRlZCB3aXRoIEdJTVBkLmUHAAAAqElEQVRIx9VW0Q6AIAgU5v\t\t\t\t\t\t//sr1Us0I6EGy5HnLR3XnAhFprJWdxSVuJ0FX7SLS/uEzDVJ8cMdAuOJfXCBPR/gSn8cHNMz+7DLEa3ccf5QSo7itPpBzoYAOuCH\t\t\t\t\t\tTbdvEMqQBb5hoGp1G0RbIYg9bFvqXaUnxKPiURHNDfg8PxLMrYNHYabe5GxI2eUqWvHj3YgTjJjWXX7vS18u2wEDT0rJlDoie0fw\t\t\t\t\t\t5mG+C/L0HylIYKAAAAAElFTkSuQmCC"},get name(){return"Polyline"},get transitModes(){return{line:!0,circle:!0}},get providerKeyNeeded(){return!1},get providerKey(){return n},set providerKey(t){return t},get userLanguage(){return d},set userLanguage(t){d=t}};var L}())}();