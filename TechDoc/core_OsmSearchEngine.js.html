<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>TravelNotes: Source: core/OsmSearchEngine.js</title>
    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
   <!--link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css"-->
    <link type="text/css" rel="stylesheet" href="styles/TravelNotes.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: core/OsmSearchEngine.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/*
Copyright - 2017 2021 - wwwouaiebe - Contact: https://www.ouaie.be/

This  program is free software;
you can redistribute it and/or modify it under the terms of the
GNU General Public License as published by the Free Software Foundation;
either version 3 of the License, or any later version.

This program is distributed in the hope that it will be useful,
but WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
GNU General Public License for more details.

You should have received a copy of the GNU General Public License
along with this program; if not, write to the Free Software
Foundation, Inc., 51 Franklin St, Fifth Floor, Boston, MA  02110-1301  USA
*/

/*
Changes:
	- v1.13.0:
		- Issue #125 : Outphase osmSearch and add it to TravelNotes
	- v2.0.0:
		- Issue #138 : Protect the app - control html entries done by user.
Doc reviewed 20200901
Tests ...
*/

/**
@------------------------------------------------------------------------------------------------------------------------------

@file OsmSearchEngine.js
@copyright Copyright - 2017 2021 - wwwouaiebe - Contact: https://www.ouaie.be/
@license GNU General Public License
@private

@------------------------------------------------------------------------------------------------------------------------------
*/

/**
@------------------------------------------------------------------------------------------------------------------------------

@module OsmSearchEngine
@private

@------------------------------------------------------------------------------------------------------------------------------
*/

import { newObjId } from '../data/ObjId.js';
import { theConfig } from '../data/Config.js';
import { theEventDispatcher } from '../util/EventDispatcher.js';
import { theGeometry } from '../util/Geometry.js';
import { theTravelNotesData } from '../data/TravelNotesData.js';
import { theHttpRequestBuilder } from '../util/HttpRequestBuilder.js';
import { INVALID_OBJ_ID, NOT_FOUND, ZERO, ONE, LAT_LNG } from '../util/Constants.js';
import { theHTMLSanitizer } from '../util/HTMLSanitizer.js';

let ourPreviousSearchRectangleObjId = INVALID_OBJ_ID;
let ourNextSearchRectangleObjId = INVALID_OBJ_ID;
let ourSearchStarted = false;

const SEARCH_DIM = 5000;
let ourPreviousSearchBounds = null;
let ourSearchBounds = null;
let ourDictionary = null;
let ourFilterItems = [];

/**
@------------------------------------------------------------------------------------------------------------------------------

@class
@classdesc This class is used to represent a branch of the dictionary tree.
@public
@------------------------------------------------------------------------------------------------------------------------------
*/

class DictionaryItem {
	constructor ( itemName, isRoot ) {
		this.name = theHTMLSanitizer.sanitizeToJsString ( itemName );
		this.items = [];
		this.filterTagsArray = [];
		this.elementTypes = [ 'node', 'way', 'relation' ];
		this.isSelected = false;
		this.isExpanded = false;
		this.isRoot = false;
		if ( isRoot ) {
			this.isExpanded = true;
			this.isRoot = true;
		}
	}
}

/**
@------------------------------------------------------------------------------------------------------------------------------

@function ourDrawPreviousSearchRectangle
@desc Draw the previous search rectangle on the map
@fires removeobject
@fires addrectangle
@private

@------------------------------------------------------------------------------------------------------------------------------
*/

function ourDrawPreviousSearchRectangle ( ) {
	if ( ! ourPreviousSearchBounds ) {
		return;
	}
	if ( INVALID_OBJ_ID === ourPreviousSearchRectangleObjId ) {
		ourPreviousSearchRectangleObjId = newObjId ( );
	}
	else {
		theEventDispatcher.dispatch ( 'removeobject', { objId : ourPreviousSearchRectangleObjId } );
	}
	theEventDispatcher.dispatch (
		'addrectangle',
		{
			objId : ourPreviousSearchRectangleObjId,
			bounds : [
				[ ourPreviousSearchBounds.getSouthWest ( ).lat, ourPreviousSearchBounds.getSouthWest ( ).lng ],
				[ ourPreviousSearchBounds.getNorthEast ( ).lat, ourPreviousSearchBounds.getNorthEast ( ).lng ]
			],
			properties : theConfig.previousSearchLimit
		}
	);

}

/**
@------------------------------------------------------------------------------------------------------------------------------

@function ourOnMapChange
@desc event listener for the map zoom and pan. Redraw the next search rectangle on the map
@fires removeobject
@fires addrectangle
@listens zoom
@listens move
@private

@------------------------------------------------------------------------------------------------------------------------------
*/

function ourOnMapChange ( ) {
	if ( INVALID_OBJ_ID === ourNextSearchRectangleObjId ) {
		ourNextSearchRectangleObjId = newObjId ( );
	}
	else {
		theEventDispatcher.dispatch ( 'removeobject', { objId : ourNextSearchRectangleObjId } );
	}
	let mapCenter = theTravelNotesData.map.getCenter ( );
	ourSearchBounds = theTravelNotesData.map.getBounds ( );
	let maxBounds = theGeometry.getSquareBoundingBox ( [ mapCenter.lat, mapCenter.lng ], SEARCH_DIM );
	ourSearchBounds.getSouthWest ( ).lat = Math.max ( ourSearchBounds.getSouthWest ( ).lat, maxBounds.getSouthWest ( ).lat );
	ourSearchBounds.getSouthWest ( ).lng = Math.max ( ourSearchBounds.getSouthWest ( ).lng, maxBounds.getSouthWest ( ).lng );
	ourSearchBounds.getNorthEast ( ).lat = Math.min ( ourSearchBounds.getNorthEast ( ).lat, maxBounds.getNorthEast ( ).lat );
	ourSearchBounds.getNorthEast ( ).lng = Math.min ( ourSearchBounds.getNorthEast ( ).lng, maxBounds.getNorthEast ( ).lng );
	theEventDispatcher.dispatch (
		'addrectangle',
		{
			objId : ourNextSearchRectangleObjId,
			bounds : ourSearchBounds,
			properties : theConfig.nextSearchLimit
		}
	);
}

/**
@------------------------------------------------------------------------------------------------------------------------------

@function ourSearchFilters
@desc search all selected items on the tree dictionary and for each selected item, add it to a list of selected items
and add the first tag to the root tags map.
@param {DictionaryItem} item The item from witch the search start. Recursive function. The first call start with ourDictionary
@private

@------------------------------------------------------------------------------------------------------------------------------
*/

function ourSearchFilters ( item ) {
	if ( item.isSelected &amp;&amp; ( ZERO &lt; item.filterTagsArray.length ) ) {
		ourFilterItems = ourFilterItems.concat ( item );
	}
	item.items.forEach ( ourSearchFilters );
}

/**
@------------------------------------------------------------------------------------------------------------------------------

@function ourGetSearchPromises
@desc Build an array of Promises for calls to OSM.
@return {Array.&lt;Promise>} An array of Promise to use with Promise.allSettled ( )
@private

@------------------------------------------------------------------------------------------------------------------------------
*/

function ourGetSearchPromises ( ) {
	let searchPromises = [];
	ourPreviousSearchBounds = ourSearchBounds;
	let tagMaps = { node : new Map ( ), way : new Map ( ), relation : new Map ( ) };
	ourFilterItems.forEach (
		filterItem => {
			filterItem.elementTypes.forEach (
				elementType => {
					filterItem.filterTagsArray.forEach (
						filterTag => {
							tagMaps [ elementType ].set ( filterTag, filterTag );
						}
					);
				}
			);
		}
	);
	let requestStrings = { node : '', way : '', relation : ''	};
	let searchBoundingBoxString = '(' +
		ourSearchBounds.getSouthWest ( ).lat.toFixed ( LAT_LNG.fixed ) +
		',' +
		ourSearchBounds.getSouthWest ( ).lng.toFixed ( LAT_LNG.fixed ) +
		',' +
		ourSearchBounds.getNorthEast ( ).lat.toFixed ( LAT_LNG.fixed ) +
		',' +
		ourSearchBounds.getNorthEast ( ).lng.toFixed ( LAT_LNG.fixed ) +
		')';
	for ( const [ element, MapTags ] of Object.entries ( tagMaps ) ) {
		MapTags.forEach (
			tag => {
				let [ key, value ] = Object.entries ( tag ) [ ZERO ];
				requestStrings [ element ] += element +
				'[' + key + ( '*' === value ? '' : '=' + value ) + ']' +
				searchBoundingBoxString + ';';
			}
		);
	}
	for ( const [ element, requestString ] of Object.entries ( requestStrings ) ) {
		if ( '' !== requestString ) {
			let url = theConfig.overpassApi.url + '?data=[out:json][timeout:40];(' +
				requestString + ');' + ( 'node' === element ? '' : '(._;>;);' ) + 'out;';

			searchPromises.push ( theHttpRequestBuilder.getJsonPromise ( url ) );
		}
	}
	return searchPromises;
}

/**
@------------------------------------------------------------------------------------------------------------------------------

@function ourFilterOsmElement
@desc Compare the tags of the osmElement with the tags of the filterTags
@return {boolean} true when all the tags present in the filterTags are present in the osmElement with the same value
@private

@------------------------------------------------------------------------------------------------------------------------------
*/

function ourFilterOsmElement ( osmElement, filterTags ) {
	let isValidOsmElement = true;
	for ( const [ key, value ] of Object.entries ( filterTags ) ) {
		isValidOsmElement =
			isValidOsmElement &amp;&amp;
			osmElement.tags [ key ] &amp;&amp;
			( osmElement.tags [ key ] === value || '*' === value );
	}
	return isValidOsmElement;
}

/**
@------------------------------------------------------------------------------------------------------------------------------

@function ourAddPointOfInterest
@desc Filter the osmElement with the list of selected DictionaryItems and add the osmElement to the map of pointsOfInterest
if the osmElement pass the filter. Add also a description, a latitude and longitude to the osmElement
@param {Object} osmElement the object to analyse
@param {Map} pointsOfInterest A map with all the retained osmElements
@private

@------------------------------------------------------------------------------------------------------------------------------
*/

function ourAddPointOfInterest ( osmElement, pointsOfInterest ) {
	ourFilterItems.forEach (
		filterItem => {
			filterItem.filterTagsArray.forEach (
				filterTags => {
					if ( ourFilterOsmElement ( osmElement, filterTags ) ) {
						osmElement.description = filterItem.name;
						pointsOfInterest.set ( osmElement.id, osmElement );
					}
				}
			);
		}
	);
}

/**
@------------------------------------------------------------------------------------------------------------------------------

@function ourParseOsmElements
@desc parse the osm responses, creating elements that can be used by TravelNotesData
@param {Array.&lt;Objects>} osmElements an array of Objects Element coming from osm
@private

@------------------------------------------------------------------------------------------------------------------------------
*/

function ourParseOsmElements ( osmElements ) {
	let pointsOfInterest = new Map ( );
	let nodes = new Map ( );
	let ways = new Map ( );
	let relations = new Map ( );

	function setWayGeometry ( way ) {
		way.geometry = [ [ ] ];
		way.lat = LAT_LNG.defaultValue;
		way.lon = LAT_LNG.defaultValue;
		let nodesCounter = ZERO;
		way.nodes.forEach (
			nodeId => {
				let node = nodes.get ( nodeId );
				way.geometry [ ZERO ].push ( [ node.lat, node.lon ] );
				way.lat += node.lat;
				way.lon += node.lon;
				nodesCounter ++;
			}
		);
		if ( ZERO !== nodesCounter ) {
			way.lat /= nodesCounter;
			way.lon /= nodesCounter;
		}
	}

	function setRelationGeometry ( relation ) {
		relation.geometry = [ [ ] ];
		relation.lat = LAT_LNG.defaultValue;
		relation.lon = LAT_LNG.defaultValue;
		let membersCounter = ZERO;
		relation.members.forEach (
			member => {
				if ( 'way' === member.type ) {
					let way = ways.get ( member.ref );
					setWayGeometry ( way );
					relation.geometry.push ( way.geometry [ ZERO ] );
					relation.lat += way.lat;
					relation.lon += way.lon;
					membersCounter ++;
				}
			}
		);
		if ( ZERO !== membersCounter ) {
			relation.lat /= membersCounter;
			relation.lon /= membersCounter;
		}
	}

	osmElements.forEach (
		osmElement => {
			switch ( osmElement.type ) {
			case 'node' :
				nodes.set ( osmElement.id, osmElement );
				break;
			case 'way' :
				ways.set ( osmElement.id, osmElement );
				break;
			case 'relation' :
				relations.set ( osmElement.id, osmElement );
				break;
			default :
				break;
			}
			if ( osmElement.tags ) {
				ourAddPointOfInterest ( osmElement, pointsOfInterest );
			}
		}
	);

	pointsOfInterest.forEach (
		pointOfInterest => {
			switch ( pointOfInterest.type ) {
			case 'way' :
				setWayGeometry ( pointOfInterest );
				break;
			case 'relation' :
				setRelationGeometry ( pointOfInterest );
				break;
			default :
				break;
			}
		}
	);
	theTravelNotesData.searchData =
		Array.from ( pointsOfInterest.values ( ) ).sort (
			( obj1, obj2 ) => obj1.description > obj2.description
				?
				ONE
				:
				( obj1.description &lt; obj2.description ? NOT_FOUND : ZERO )
		);
	ourSearchStarted = false;
	theEventDispatcher.dispatch ( 'showsearch' );
}

/**
@------------------------------------------------------------------------------------------------------------------------------

@function ourParseSearchResult
@desc read each response in the array returned by the call to Promise.allSettled ( ) and push all osmElements in an array
@param {Array.&lt;Object>} results The array given by the call to Promise.allSettled ( )
@private

@------------------------------------------------------------------------------------------------------------------------------
*/

function ourParseSearchResult ( results ) {
	let osmElements = [];
	results.forEach (
		result => {
			if ( 'fulfilled' === result.status ) {
				osmElements = osmElements.concat ( result.value.elements );
			}
			else {
				console.log ( result.reason );
			}
		}
	);
	ourParseOsmElements ( osmElements );
}

/**
@------------------------------------------------------------------------------------------------------------------------------

@class
@classdesc This class manages the search dictionary, the search rectangles on the map and search the osm data
@see {@link theOsmSearchEngine} for the one and only one instance of this class
@hideconstructor

@------------------------------------------------------------------------------------------------------------------------------
*/

class OsmSearchEngine	{

	/**
	The dictionary is a DictionaryItems tree that is used to performs search in osm
	*/

	get dictionary ( ) { return ourDictionary; }

	/**
	Start a search into osm for the items selected in the dictionary
	*/

	search ( ) {
		if ( ourSearchStarted ) {
			return;
		}
		ourSearchStarted = true;
		ourFilterItems = [];
		ourSearchFilters ( ourDictionary );
		Promise.allSettled ( ourGetSearchPromises ( ) )
			.then ( ourParseSearchResult );
	}

	/**
	Add maps event listeners and search rectangles on the map
	*/

	show ( ) {
		theTravelNotesData.map.on ( 'zoom', ourOnMapChange );
		theTravelNotesData.map.on ( 'move', ourOnMapChange );
		ourOnMapChange ( );
		ourDrawPreviousSearchRectangle ( );
	}

	/**
	Remove maps event listeners and search rectangles on the map
	*/

	hide ( ) {
		let eventDispatcher = theEventDispatcher;
		theTravelNotesData.map.off ( 'zoom', ourOnMapChange );
		theTravelNotesData.map.off ( 'move', ourOnMapChange );
		if ( INVALID_OBJ_ID !== ourNextSearchRectangleObjId ) {
			eventDispatcher.dispatch ( 'removeobject', { objId : ourNextSearchRectangleObjId } );
			ourNextSearchRectangleObjId = INVALID_OBJ_ID;
		}
		if ( INVALID_OBJ_ID !== ourPreviousSearchRectangleObjId ) {
			eventDispatcher.dispatch ( 'removeobject', { objId : ourPreviousSearchRectangleObjId } );
			ourPreviousSearchRectangleObjId = INVALID_OBJ_ID;
		}
	}

	/**
	Parse the content of the TravelNotesSearchDictionaryXX.csv and build a tree of DictionaryItems
	with this content
	*/

	parseDictionary ( dictionaryTextContent ) {
		ourDictionary = new DictionaryItem ( 'All', true );
		let itemsArray = [ ourDictionary.items ];
		let filterTagsArray = null;
		let currentItem = null;

		// split a line into words and add a DictionaryItem or a filterTag to the dictionary
		function parseLine ( line ) {
			let words = line.split ( ';' );
			while ( '' === words [ words.length - ONE ] ) {
				words.pop ( );
			}
			let wordPos = ZERO;
			let filterTags = null;
			words.forEach (
				word => {
					if ( '' !== word ) {
						if ( NOT_FOUND === word.indexOf ( '=' ) ) {
							currentItem = new DictionaryItem ( word );
							itemsArray [ wordPos ].push ( currentItem );
							itemsArray [ wordPos + ONE ] = currentItem.items;
							filterTagsArray = currentItem.filterTagsArray;
						}
						else {
							let keyAndValue = word.split ( '=' );
							if ( 'element' === keyAndValue [ ZERO ] ) {
								currentItem.elementTypes = [ keyAndValue [ ONE ] ];
							}
							else {
								filterTags =
									filterTags
									||
									{
									};
								filterTags [ keyAndValue [ ZERO ] ] = keyAndValue [ ONE ];
							}
						}
					}
					wordPos ++;
				}
			);
			if ( filterTags ) {
				filterTagsArray.push ( filterTags );
			}
		}

		// split the dictionary content into lines and analyse each line
		dictionaryTextContent
			.split ( /\r\n|\r|\n/ )
			.forEach (
				line => {
					if ( '' !== line ) {
						parseLine ( line );
					}
				}
			);
	}
}

const ourOsmSearchEngine = Object.seal ( new OsmSearchEngine );

export {

	/**
	@--------------------------------------------------------------------------------------------------------------------------

	@desc The one and only one instance of OsmSearchEngine class
	@type {OsmSearchEngine}
	@constant
	@global

	@--------------------------------------------------------------------------------------------------------------------------
	*/

	ourOsmSearchEngine as theOsmSearchEngine
};

/*
--- End of OsmSearchEngine.js file --------------------------------------------------------------------------------------------
*/</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="module-AboutDialog-AboutDialog.html">AboutDialog</a></li><li><a href="module-APIKeysDialog-APIKeysDialog.html">APIKeysDialog</a></li><li><a href="module-APIKeysManager-APIKeysManager.html">APIKeysManager</a></li><li><a href="module-AttributionsUI-AttributionsUI.html">AttributionsUI</a></li><li><a href="module-BaseContextMenu-BaseContextMenu.html">BaseContextMenu</a></li><li><a href="module-BaseDialog-BaseDialog.html">BaseDialog</a></li><li><a href="module-Collection-Collection.html">Collection</a></li><li><a href="module-ColorDialog-Color.html">Color</a></li><li><a href="module-ColorDialog-ColorDialog.html">ColorDialog</a></li><li><a href="module-Config-Config.html">Config</a></li><li><a href="module-DataEncryptor-DataEncryptor.html">DataEncryptor</a></li><li><a href="module-DataSearchEngine-DataSearchEngine.html">DataSearchEngine</a></li><li><a href="module-ErrorsUI-ErrorsUI.html">ErrorsUI</a></li><li><a href="module-EventDispatcher-EventDispatcher.html">EventDispatcher</a></li><li><a href="module-FileCompactor-FileCompactor.html">FileCompactor</a></li><li><a href="module-FileLoader-FileLoader.html">FileLoader</a></li><li><a href="module-FloatWindow-FloatWindow.html">FloatWindow</a></li><li><a href="module-GeoCoder-GeoCoder.html">GeoCoder</a></li><li><a href="module-GeoLocator-GeoLocator.html">GeoLocator</a></li><li><a href="module-Geometry-Geometry.html">Geometry</a></li><li><a href="module-GpxFactory-GpxFactory.html">GpxFactory</a></li><li><a href="module-HTMLElementsFactory-HTMLElementsFactory.html">HTMLElementsFactory</a></li><li><a href="module-HTMLSanitizer-HTMLSanitizer.html">HTMLSanitizer</a></li><li><a href="module-HTMLSanitizer-ourValidityMap.html">ourValidityMap</a></li><li><a href="module-HTMLViewsFactory-HTMLViewsFactory.html">HTMLViewsFactory</a></li><li><a href="module-HttpRequestBuilder-HttpRequestBuilder.html">HttpRequestBuilder</a></li><li><a href="module-IndexedDb-IndexedDb.html">IndexedDb</a></li><li><a href="module-ItineraryPaneUI-ItineraryPaneUI.html">ItineraryPaneUI</a></li><li><a href="module-ItineraryPoint-ItineraryPoint.html">ItineraryPoint</a></li><li><a href="module-Itinerary-Itinerary.html">Itinerary</a></li><li><a href="module-LayersToolbarUI-LayersToolbarUI.html">LayersToolbarUI</a></li><li><a href="module-Layer-Layer.html">Layer</a></li><li><a href="module-MainViewer-MainViewer.html">MainViewer</a></li><li><a href="module-Main-Main.html">Main</a></li><li><a href="module-ManeuverContextMenu-ManeuverContextMenu.html">ManeuverContextMenu</a></li><li><a href="module-Maneuver-Maneuver.html">Maneuver</a></li><li><a href="module-MapContextMenu-MapContextMenu.html">MapContextMenu</a></li><li><a href="module-MapEditor-MapEditor.html">MapEditor</a></li><li><a href="module-MouseUI-MouseUI.html">MouseUI</a></li><li><a href="module-NoteContextMenu-NoteContextMenu.html">NoteContextMenu</a></li><li><a href="module-NoteDialogToolbar-NoteDialogToolbar.html">NoteDialogToolbar</a></li><li><a href="module-NoteDialog-NoteDialog.html">NoteDialog</a></li><li><a href="module-NoteEditor-NoteEditor.html">NoteEditor</a></li><li><a href="module-Note-Note.html">Note</a></li><li><a href="module-ObjType-ObjType.html">ObjType</a></li><li><a href="module-OsmSearchContextMenu-OsmSearchContextMenu.html">OsmSearchContextMenu</a></li><li><a href="module-OsmSearchEngine-DictionaryItem.html">DictionaryItem</a></li><li><a href="module-OsmSearchEngine-OsmSearchEngine.html">OsmSearchEngine</a></li><li><a href="module-OsmSearchPaneUI-OsmSearchPaneUI.html">OsmSearchPaneUI</a></li><li><a href="module-PanesManagerUI-PanesManagerUI.html">PanesManagerUI</a></li><li><a href="module-PasswordDialog-PasswordDialog.html">PasswordDialog</a></li><li><a href="module-PrintFactory-PrintFactory.html">PrintFactory</a></li><li><a href="module-PrintRouteMapDialog-PrintRouteMapDialog.html">PrintRouteMapDialog</a></li><li><a href="module-ProfileContextMenu-ProfileContextMenu.html">ProfileContextMenu</a></li><li><a href="module-ProfileFactory-ProfileFactory.html">ProfileFactory</a></li><li><a href="module-ProfileWindowsManager-ProfileWindowsManager.html">ProfileWindowsManager</a></li><li><a href="module-ProfileWindow-ProfileWindow.html">ProfileWindow</a></li><li><a href="module-ProvidersToolbarUI-ProvidersToolbarUI.html">ProvidersToolbarUI</a></li><li><a href="module-RouteContextMenu-RouteContextMenu.html">RouteContextMenu</a></li><li><a href="module-RouteEditor-RouteEditor.html">RouteEditor</a></li><li><a href="module-RoutePropertiesDialog-RoutePropertiesDialog.html">RoutePropertiesDialog</a></li><li><a href="module-Route-Route.html">Route</a></li><li><a href="module-SvgIconFromOsmFactory-SvgIconFromOsmFactory.html">SvgIconFromOsmFactory</a></li><li><a href="module-Translator-Translator.html">Translator</a></li><li><a href="module-TravelEditor-TravelEditor.html">TravelEditor</a></li><li><a href="module-TravelNotesData-TravelNotesData.html">TravelNotesData</a></li><li><a href="module-TravelNotesPaneUI-TravelNotesPaneUI.html">TravelNotesPaneUI</a></li><li><a href="module-TravelNotesToolbarUI-TravelNotesToolbarUI.html">TravelNotesToolbarUI</a></li><li><a href="module-TravelNotesViewer-TravelNotesViewer.html">TravelNotesViewer</a></li><li><a href="module-TravelNotes-TravelNotes.html">TravelNotes</a></li><li><a href="module-TravelUI-TravelUI.html">TravelUI</a></li><li><a href="module-Travel-Travel.html">Travel</a></li><li><a href="module-TwoButtonsDialog-TwoButtonsDialog.html">TwoButtonsDialog</a></li><li><a href="module-UI-UI.html">UI</a></li><li><a href="module-Utilities-Utilities.html">Utilities</a></li><li><a href="module-ViewerFileLoader-ViewerFileLoader.html">ViewerFileLoader</a></li><li><a href="module-ViewerLayersToolbarUI-ViewerLayersToolbarUI.html">ViewerLayersToolbarUI</a></li><li><a href="module-ViewerMapEditor-ViewerMapEditor.html">ViewerMapEditor</a></li><li><a href="module-WaitUI-WaitUI.html">WaitUI</a></li><li><a href="module-WayPointContextMenu-WayPointContextMenu.html">WayPointContextMenu</a></li><li><a href="module-WayPointEditor-WayPointEditor.html">WayPointEditor</a></li><li><a href="module-WayPointPropertiesDialog-WayPointPropertiesDialog.html">WayPointPropertiesDialog</a></li><li><a href="module-WayPoint-WayPoint.html">WayPoint</a></li><li><a href="module-Zoomer-Zoomer.html">Zoomer</a></li></ul><h3>Interfaces</h3><ul><li><a href="PaneUI.html">PaneUI</a></li><li><a href="Provider.html">Provider</a></li></ul><h3>Events</h3><ul><li><a href="module-EventDispatcher.html#~event:additinerarypointmarker">additinerarypointmarker</a></li><li><a href="module-EventDispatcher.html#~event:addrectangle">addrectangle</a></li><li><a href="module-EventDispatcher.html#~event:addsearchpointmarker">addsearchpointmarker</a></li><li><a href="module-EventDispatcher.html#~event:addwaypoint">addwaypoint</a></li><li><a href="module-EventDispatcher.html#~event:geolocationpositionchanged">geolocationpositionchanged</a></li><li><a href="module-EventDispatcher.html#~event:geolocationstatuschanged">geolocationstatuschanged</a></li><li><a href="module-EventDispatcher.html#~event:layerchange">layerchange</a></li><li><a href="module-EventDispatcher.html#~event:noteupdated">noteupdated</a></li><li><a href="module-EventDispatcher.html#~event:profileclosed">profileclosed</a></li><li><a href="module-EventDispatcher.html#~event:providersadded">providersadded</a></li><li><a href="module-EventDispatcher.html#~event:removeallobjects">removeallobjects</a></li><li><a href="module-EventDispatcher.html#~event:removeobject">removeobject</a></li><li><a href="module-EventDispatcher.html#~event:roadbookupdate">roadbookupdate</a></li><li><a href="module-EventDispatcher.html#~event:routepropertiesupdated">routepropertiesupdated</a></li><li><a href="module-EventDispatcher.html#~event:routeupdated">routeupdated</a></li><li><a href="module-EventDispatcher.html#~event:setprovider">setprovider</a></li><li><a href="module-EventDispatcher.html#~event:setrouteslist">setrouteslist</a></li><li><a href="module-EventDispatcher.html#~event:settransitmode">settransitmode</a></li><li><a href="module-EventDispatcher.html#~event:showitinerary">showitinerary</a></li><li><a href="module-EventDispatcher.html#~event:showsearch">showsearch</a></li><li><a href="module-EventDispatcher.html#~event:showtravelnotes">showtravelnotes</a></li><li><a href="module-EventDispatcher.html#~event:travelnameupdated">travelnameupdated</a></li><li><a href="module-EventDispatcher.html#~event:updateitinerary">updateitinerary</a></li><li><a href="module-EventDispatcher.html#~event:updatesearch">updatesearch</a></li><li><a href="module-EventDispatcher.html#~event:updatetravelnotes">updatetravelnotes</a></li><li><a href="module-EventDispatcher.html#~event:zoomto">zoomto</a></li></ul><h3>Tutorials</h3><ul><li><a href="tutorial-InstallationGuideEN.html">InstallationGuideEN</a></li><li><a href="tutorial-UserGuideEN.html">UserGuideEN</a></li><li><a href="tutorial-GuideInstallationFR.html">GuideInstallationFR</a></li><li><a href="tutorial-GuideUtilisateurFR.html">GuideUtilisateurFR</a></li><li><a href="tutorial-README.html">README</a></li></ul><h3>Global</h3><ul><li><a href="global.html#newAboutDialog">newAboutDialog</a></li><li><a href="global.html#newAPIKeysDialog">newAPIKeysDialog</a></li><li><a href="global.html#newBaseContextMenu">newBaseContextMenu</a></li><li><a href="global.html#newBaseDialog">newBaseDialog</a></li><li><a href="global.html#newCollection">newCollection</a></li><li><a href="global.html#newColorDialog">newColorDialog</a></li><li><a href="global.html#newDataEncryptor">newDataEncryptor</a></li><li><a href="global.html#newFileCompactor">newFileCompactor</a></li><li><a href="global.html#newFileLoader">newFileLoader</a></li><li><a href="global.html#newFloatWindow">newFloatWindow</a></li><li><a href="global.html#newGeoCoder">newGeoCoder</a></li><li><a href="global.html#newGpxFactory">newGpxFactory</a></li><li><a href="global.html#newItinerary">newItinerary</a></li><li><a href="global.html#newItineraryPoint">newItineraryPoint</a></li><li><a href="global.html#newLayer">newLayer</a></li><li><a href="global.html#newManeuver">newManeuver</a></li><li><a href="global.html#newManeuverContextMenu">newManeuverContextMenu</a></li><li><a href="global.html#newMapContextMenu">newMapContextMenu</a></li><li><a href="global.html#newNote">newNote</a></li><li><a href="global.html#newNoteContextMenu">newNoteContextMenu</a></li><li><a href="global.html#newNoteDialog">newNoteDialog</a></li><li><a href="global.html#newObjId">newObjId</a></li><li><a href="global.html#newObjType">newObjType</a></li><li><a href="global.html#newOsmSearchContextMenu">newOsmSearchContextMenu</a></li><li><a href="global.html#newPasswordDialog">newPasswordDialog</a></li><li><a href="global.html#newPrintFactory">newPrintFactory</a></li><li><a href="global.html#newPrintRouteMapDialog">newPrintRouteMapDialog</a></li><li><a href="global.html#newProfileContextMenu">newProfileContextMenu</a></li><li><a href="global.html#newProfileFactory">newProfileFactory</a></li><li><a href="global.html#newProfileWindow">newProfileWindow</a></li><li><a href="global.html#newRoadbookUpdate">newRoadbookUpdate</a></li><li><a href="global.html#newRoute">newRoute</a></li><li><a href="global.html#newRouteContextMenu">newRouteContextMenu</a></li><li><a href="global.html#newRoutePropertiesDialog">newRoutePropertiesDialog</a></li><li><a href="global.html#newSvgIconFromOsmFactory">newSvgIconFromOsmFactory</a></li><li><a href="global.html#newTravel">newTravel</a></li><li><a href="global.html#newTravelNotesPaneUI">newTravelNotesPaneUI</a></li><li><a href="global.html#newTwoButtonsDialog">newTwoButtonsDialog</a></li><li><a href="global.html#newViewerFileLoader">newViewerFileLoader</a></li><li><a href="global.html#newWaitUI">newWaitUI</a></li><li><a href="global.html#newWayPoint">newWayPoint</a></li><li><a href="global.html#newWayPointContextMenu">newWayPointContextMenu</a></li><li><a href="global.html#newWayPointPropertiesDialog">newWayPointPropertiesDialog</a></li><li><a href="global.html#newZoomer">newZoomer</a></li><li><a href="global.html#theAPIKeysManager">theAPIKeysManager</a></li><li><a href="global.html#theAttributionsUI">theAttributionsUI</a></li><li><a href="global.html#theConfig">theConfig</a></li><li><a href="global.html#theCurrentVersion">theCurrentVersion</a></li><li><a href="global.html#theDataSearchEngine">theDataSearchEngine</a></li><li><a href="global.html#theErrorsUI">theErrorsUI</a></li><li><a href="global.html#theEventDispatcher">theEventDispatcher</a></li><li><a href="global.html#theGeoLocator">theGeoLocator</a></li><li><a href="global.html#theGeometry">theGeometry</a></li><li><a href="global.html#theHTMLElementsFactory">theHTMLElementsFactory</a></li><li><a href="global.html#theHTMLSanitizer">theHTMLSanitizer</a></li><li><a href="global.html#theHTMLViewsFactory">theHTMLViewsFactory</a></li><li><a href="global.html#theHttpRequestBuilder">theHttpRequestBuilder</a></li><li><a href="global.html#theIndexedDb">theIndexedDb</a></li><li><a href="global.html#theLayersToolbarUI">theLayersToolbarUI</a></li><li><a href="global.html#theMapEditor">theMapEditor</a></li><li><a href="global.html#theMouseUI">theMouseUI</a></li><li><a href="global.html#theNoteDialogToolbar">theNoteDialogToolbar</a></li><li><a href="global.html#theNoteEditor">theNoteEditor</a></li><li><a href="global.html#theOsmSearchEngine">theOsmSearchEngine</a></li><li><a href="global.html#thePanesManagerUI">thePanesManagerUI</a></li><li><a href="global.html#theProfileWindowsManager">theProfileWindowsManager</a></li><li><a href="global.html#theProvidersToolbarUI">theProvidersToolbarUI</a></li><li><a href="global.html#theRouteEditor">theRouteEditor</a></li><li><a href="global.html#theTranslator">theTranslator</a></li><li><a href="global.html#theTravelEditor">theTravelEditor</a></li><li><a href="global.html#theTravelNotes">theTravelNotes</a></li><li><a href="global.html#theTravelNotesData">theTravelNotesData</a></li><li><a href="global.html#theTravelNotesToolbarUI">theTravelNotesToolbarUI</a></li><li><a href="global.html#theTravelNotesViewer">theTravelNotesViewer</a></li><li><a href="global.html#theTravelUI">theTravelUI</a></li><li><a href="global.html#theUI">theUI</a></li><li><a href="global.html#theUtilities">theUtilities</a></li><li><a href="global.html#theViewerLayersToolbarUI">theViewerLayersToolbarUI</a></li><li><a href="global.html#theViewerMapEditor">theViewerMapEditor</a></li><li><a href="global.html#theWayPointEditor">theWayPointEditor</a></li></ul>
</nav>

<br class="clear">

<!--footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 3.6.5</a> on Wed Jan 13 2021 08:34:31 GMT+0100 (GMT+01:00)
</footer-->
<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
